// Do not edit directly!
// This file was generated by cq-maven-plugin:update-doc-page
[id="quarkus-cxf-integration-tracing-opentelemetry"]
= OpenTelemetry
:linkattrs:
:cq-artifact-id: quarkus-cxf-integration-tracing-opentelemetry
:cq-group-id: io.quarkiverse.cxf
:cq-status: Stable
:cq-deprecated: false
:cq-since: 2.7.0

ifeval::[{doc-show-badges} == true]
Stable â€¢ Since 2.7.0
endif::[]

Generate https://opentelemetry.io/[OpenTelemetry] https://opentelemetry.io/docs/concepts/signals/traces/[traces].

[IMPORTANT]
====
OpenTelemetry Metrics and Logging are not supported yet on neither Quarkus nor CXF side,
hence {quarkus-cxf-project-name} cannot support them either. Tracing is thus
the only OpenTelemetry feature supported by this extension.
====


[id="quarkus-cxf-integration-tracing-opentelemetry-maven-coordinates"]
== Maven coordinates

Create https://{link-quarkus-code-generator}/?extension-search=quarkus-cxf-integration-tracing-opentelemetry[a new project using `quarkus-cxf-integration-tracing-opentelemetry` on {link-quarkus-code-generator}, window="_blank"]
or add these coordinates to your existing project:

[source,xml]
----
<dependency>
    <groupId>io.quarkiverse.cxf</groupId>
    <artifactId>quarkus-cxf-integration-tracing-opentelemetry</artifactId>
</dependency>
----
ifeval::[{doc-show-user-guide-link} == true]
[TIP]
====
Check the xref:user-guide/index.adoc[User guide] and especially its
xref:user-guide/create-project.adoc#dependency-management[Dependency management] section
for more information about writing applications with {quarkus-cxf-project-name}.
====
endif::[]

[id="quarkus-cxf-integration-tracing-opentelemetry-usage"]
== Usage

This extension builds on top of `org.apache.cxf.tracing.opentelemetry.OpenTelemetryFeature` (for service endpoints)
and `org.apache.cxf.tracing.opentelemetry.OpenTelemetryClientFeature` (for clients).
Instances of these are created and configured internally using the instance of `io.opentelemetry.api.OpenTelemetry`
provided by {link-quarkus-docs-base}/opentelemetry[Quarkus OpenTelemetry].

The tracing is enabled by default for all clients and service endpoints created by {quarkus-cxf-project-name},
unless you disable it explicitly via `quarkus.cxf.otel.enabled-for`, `quarkus.cxf.client."client-name".otel.enabled`
or `quarkus.cxf.endpoint."/endpoint-path".otel.enabled`.

[id="extensions-quarkus-cxf-integration-tracing-opentelemetry-usage-runnable-example"]
=== Runnable example

There is an https://github.com/quarkiverse/quarkus-cxf/tree/main/integration-tests/opentelemetry[integration test]
covering OpenTelemetry in the {quarkus-cxf-project-name} source tree.
It is using `InMemorySpanExporter` from `io.opentelemetry:opentelemetry-sdk-testing`,
so that the spans can be inspected from tests easily.
Refer to Quarkus {link-quarkus-docs-base}/opentelemetry#exporters[OpenTelemetry guide] for information
about other supported span exporters and collectors.


[id="quarkus-cxf-integration-tracing-opentelemetry-configuration"]
== Configuration

[.configuration-legend]
icon:lock[title=Fixed at build time] Configuration property fixed at build time. All other configuration properties are overridable at runtime.

[.configuration-reference.searchable, cols="80,.^10,.^10", stripes=odd]
|===
| Configuration property | Type | Default


.<| [[quarkus-cxf_quarkus-cxf-otel-enabled-for]]`link:#quarkus-cxf_quarkus-cxf-otel-enabled-for[quarkus.cxf.otel.enabled-for]`
.<| `clients`, `services`, `both`, `none`
.<| `both`

3+a|Specifies whether the OpenTelemetry tracing will be enabled for clients, services, both or none. This global setting
can be overridden per client or service endpoint using the `quarkus.cxf.client."client-name".otel.enabled` or
`quarkus.cxf.endpoint."/endpoint-path".otel.enabled` option respectively.

`quarkus.otel.enabled` and `quarkus.otel.sdk.disabled` also impact whether the CXF telemetry data is
collected. Check {link-quarkus-docs-base}/opentelemetry#disable-all-or-parts-of-the-opentelemetry-extension[Quarkus
OpenTelemetry guide].

*Environment variable*: `+++QUARKUS_CXF_OTEL_ENABLED_FOR+++` +
*Since Quarkus CXF*: 2.7.0

.<| [[quarkus-cxf_quarkus-cxf-client-client-name-otel-enabled]]`link:#quarkus-cxf_quarkus-cxf-client-client-name-otel-enabled[quarkus.cxf.client."client-name".otel.enabled]`
.<| `boolean`
.<| `true`

3+a|If `true` and if `quarkus.cxf.otel.enabled-for` is set to `both` or `clients` then the
`OpenTelemetryClientFeature` will be added to this client; otherwise the feature will not be added to this
client.

*Environment variable*: `+++QUARKUS_CXF_CLIENT__CLIENT_NAME__OTEL_ENABLED+++` +
*Since Quarkus CXF*: 2.7.0

.<| [[quarkus-cxf_quarkus-cxf-endpoint-endpoint-path-otel-enabled]]`link:#quarkus-cxf_quarkus-cxf-endpoint-endpoint-path-otel-enabled[quarkus.cxf.endpoint."/endpoint-path".otel.enabled]`
.<| `boolean`
.<| `true`

3+a|If `true` and if `quarkus.cxf.otel.enabled-for` is set to `both` or `services` then the `OpenTelemetryFeature`
will be added to this service endpoint; otherwise the feature will not be added to this service endpoint.

`quarkus.otel.enabled` and `quarkus.otel.sdk.disabled` also impact whether the CXF telemetry data is
collected. Check
{link-quarkus-docs-base}/opentelemetry#disable-all-or-parts-of-the-opentelemetry-extension[Quarkus OpenTelemetry
guide].

*Environment variable*: `+++QUARKUS_CXF_ENDPOINT___ENDPOINT_PATH__OTEL_ENABLED+++` +
*Since Quarkus CXF*: 2.7.0
|===

